<!doctype html>
<html
  dir="ltr"
  lang="en"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="content-language" content="zh-cn" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Go Generic &middot; WiloSite</title>
    <meta name="title" content="Go Generic &middot; WiloSite" />
  <meta name="description" content="" />
  <link rel="canonical" href="https://luyu-fan.github.io/notes/go_generic/" />
  
  

<link
  type="text/css"
  rel="stylesheet"
  href="/css/main.min.b0801b3dff1e7e7eb34a8067e1d77184a4415cecbd97f080a3abf0ff8abf214a.css"
  integrity="sha256-sIAbPf8efn6zSoBn4ddxhKRBXOy9l/CAo6vw/4q/IUo="
/>



  <link rel="icon" sizes="192x192" href="/logo-192.png" />
    <link rel="apple-touch-icon" href="/logo-192.png" />
    <link rel="mask-icon" href="/logo.svg" color="blue" />
    <link rel="manifest" href="/site.webmanifest" />
  


  <meta property="og:title" content="Go Generic" />
<meta property="og:description" content="GO 泛型支持 # 在Go中，泛型是和接口类型共同构成了多态系统，但是泛型实际上也是一种妥协。
泛型函数 # 指的是可以对一类数据类型进行某种逻辑操作的函数。
// 该函数标识可以对一类数据类型执行加法操作，其中T是类型参数 // 1. T为类型参数, 在使用泛型时需要为这个参数赋值 // 2. int | float32为函数中对参数类型约束 func AddAny[T int | float32 | float64 | int64](a, b T) T { return a &#43; b } func TestAnyAdd(t *testing.T) { t.Logf(&#34;V: %v&#34;, AddAny[int64](12, 43)) // 显式指定 t.Logf(&#34;V: %v&#34;, AddAny(12.0, 43.0)) // 隐式自动推导 // AddAny(float64(12), float32(12)) // 要求必须要类型一致 } 类型参数 &amp; 类型实参。
其中比较重要的一点是，需要在调用时传入具体数据类型作为类型实参，也可以自行推导。
类型约束 # 即约束这个函数可以使用什么样的数据类型。
type Ordered interface { ~int | ~int64 | ~float32 | ~float64 } 约束时可以使用~也可以不用,区别是什么?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://luyu-fan.github.io/notes/go_generic/" /><meta property="article:section" content="notes" />
<meta property="article:published_time" content="2024-02-20T23:56:37+08:00" />
<meta property="article:modified_time" content="2024-02-20T23:56:37+08:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Go Generic"/>
<meta name="twitter:description" content="GO 泛型支持 # 在Go中，泛型是和接口类型共同构成了多态系统，但是泛型实际上也是一种妥协。
泛型函数 # 指的是可以对一类数据类型进行某种逻辑操作的函数。
// 该函数标识可以对一类数据类型执行加法操作，其中T是类型参数 // 1. T为类型参数, 在使用泛型时需要为这个参数赋值 // 2. int | float32为函数中对参数类型约束 func AddAny[T int | float32 | float64 | int64](a, b T) T { return a &#43; b } func TestAnyAdd(t *testing.T) { t.Logf(&#34;V: %v&#34;, AddAny[int64](12, 43)) // 显式指定 t.Logf(&#34;V: %v&#34;, AddAny(12.0, 43.0)) // 隐式自动推导 // AddAny(float64(12), float32(12)) // 要求必须要类型一致 } 类型参数 &amp; 类型实参。
其中比较重要的一点是，需要在调用时传入具体数据类型作为类型实参，也可以自行推导。
类型约束 # 即约束这个函数可以使用什么样的数据类型。
type Ordered interface { ~int | ~int64 | ~float32 | ~float64 } 约束时可以使用~也可以不用,区别是什么?"/>



  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "articleSection": "Notes",
    "name": "Go Generic",
    "headline": "Go Generic",
    "description": "GO 泛型支持 # 在Go中，泛型是和接口类型共同构成了多态系统，但是泛型实际上也是一种妥协。\n泛型函数 # 指的是可以对一类数据类型进行某种逻辑操作的函数。\n\/\/ 该函数标识可以对一类数据类型执行加法操作，其中T是类型参数 \/\/ 1. T为类型参数, 在使用泛型时需要为这个参数赋值 \/\/ 2. int | float32为函数中对参数类型约束 func AddAny[T int | float32 | float64 | int64](a, b T) T { return a \u002b b } func TestAnyAdd(t *testing.T) { t.Logf(\u0026#34;V: %v\u0026#34;, AddAny[int64](12, 43)) \/\/ 显式指定 t.Logf(\u0026#34;V: %v\u0026#34;, AddAny(12.0, 43.0)) \/\/ 隐式自动推导 \/\/ AddAny(float64(12), float32(12)) \/\/ 要求必须要类型一致 } 类型参数 \u0026amp; 类型实参。\n其中比较重要的一点是，需要在调用时传入具体数据类型作为类型实参，也可以自行推导。\n类型约束 # 即约束这个函数可以使用什么样的数据类型。\ntype Ordered interface { ~int | ~int64 | ~float32 | ~float64 } 约束时可以使用~也可以不用,区别是什么?",
    "inLanguage": "zh-cn",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    "creator" : {
      "@type": "Person",
      "name": ""
    },
    "copyrightHolder": "",
    "copyrightYear": "2024",
    "dateCreated": "2024-02-20T23:56:37\u002b08:00",
    "datePublished": "2024-02-20T23:56:37\u002b08:00",
    "dateModified": "2024-02-20T23:56:37\u002b08:00",
    "url" : "https:\/\/luyu-fan.github.io\/notes\/go_generic\/",
    "wordCount": "95",
    "keywords": []
  }
  </script>




  
    <meta name="generator" content="Hugo 0.122.0">
  
  
  <script
    defer
    src="/js/main.min.e313c084cf6044c594d104e48fd9d459627c701c80b228fa1afde4aa85fde088.js"
    integrity="sha256-4xPAhM9gRMWU0QTkj9nUWWJ8cByAsij6Gv3kqoX94Ig="
  ></script>
  <script>
    if (!('theme' in localStorage)) {
      localStorage.theme = "light";
    }
    if (localStorage.theme === 'dark' || ((!('theme' in localStorage) || localStorage.theme === 'auto') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>
  

</head>

  <body class="min-h-full w-full" x-data="{ up: false }">
    

    <div
  x-data="{ open: false }"
  @keydown.window.escape="open = false"
  class="sticky inset-x-0 top-0 z-10 bg-neutral-50/50 text-neutral-900 after:absolute after:left-0 after:top-0 after:-z-10 after:h-full after:w-full after:backdrop-blur-xl after:content-[''] dark:bg-neutral-800/60 dark:text-neutral-200"
>
  <div class="fixed z-10 flex h-screen w-48 lg:hidden" :class="open ? '' : 'hidden'" x-ref="dialog" aria-modal="true">
    <div
      class="fixed inset-0 bg-gray-950/25"
      :class="open ? '' : 'hidden'"
      x-show="open"
      x-transition:enter="transition-opacity ease-linear duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition-opacity ease-linear duration-300"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
      x-description="Off-canvas menu overlay, show/hide based on off-canvas menu state."
      @click="open = false"
      aria-hidden="true"
    ></div>
    <div
      class="fixed inset-0 flex h-full w-full max-w-xxs flex-col overflow-y-auto bg-neutral-50 pb-12 shadow-xl dark:bg-neutral-800"
      :class="open ? '' : 'hidden'"
      x-show="open"
      x-transition:enter="transition ease-in-out duration-300"
      x-transition:enter-start="-translate-x-full"
      x-transition:enter-end="translate-x-0"
      x-transition:leave="transition ease-in-out duration-300"
      x-transition:leave-start="translate-x-0"
      x-transition:leave-end="-translate-x-full"
      x-description="Off-canvas menu, show/hide based on off-canvas menu state."
    >
      <div class="flex px-4 pb-2 pt-5">
        <button
          type="button"
          title="Close menu"
          class="-m-2 inline-flex items-center justify-center rounded-md p-2 text-neutral-400"
          @click="open = false"
        >
          <span class="sr-only">Close menu</span>
          <svg
            class="h-6 w-6"
            x-description="Heroicon name: outline/x"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <ul class="divide-y divide-neutral-200 py-4">
        <li
            class=" flow-root px-4 py-2"
          >
            <a href="/" title="WiloSite" class="-m-2 block p-2 font-medium">Home</a>
          </li>
        <li
            class=" flow-root px-4 py-2"
          >
            <a href="" title="" class="-m-2 block p-2 font-medium">Blog</a>
          </li>
        <li
            class=" flow-root px-4 py-2"
          >
            <a href="/categories/" title="Categories" class="-m-2 block p-2 font-medium">Categories</a>
          </li>
        <li
            class=" flow-root px-4 py-2"
          >
            <a href="/tags/" title="Tags" class="-m-2 block p-2 font-medium">Tags</a>
          </li>
        
      </ul>
    </div>
  </div>

  <header class="dark:shadow-dark shadow">
    <nav class="container mx-auto flex max-w-7xl items-center px-6 leading-12 lg:px-8 xl:px-12" aria-label="Top">
        <a
          class="relative hidden p-2 align-middle lg:block"
          rel="me"
          href="/"
          title="WiloSite"
        >
          <img src="/logo-192.png" class="h-8 w-auto" alt="WiloSite" />
        </a>


      <button class="lg:hidden" type="button" @click="open = true" aria-label="Open menu">
        <svg
          class="block h-6 w-6"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          aria-hidden="true"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <div class="mx-2 h-12 flex-grow">
        <div class="relative h-full w-full">
          <div class="absolute max-w-full" :class="up ? 'hidden' : ''" x-show="!up" x-transition.duration.750ms>
            <span class="overflow-hidden text-ellipsis whitespace-nowrap font-semibold tracking-wider"
              >WiloSite</span
            >
          </div>
          <template x-if="true">
            <div
              class="absolute left-0 right-0 top-0 max-w-full"
              :class="up ? '' : 'hidden'"
              x-show="up"
              x-transition.duration.750ms
            >
              <span class="overflow-hidden text-ellipsis whitespace-nowrap">Go Generic</span>
            </div>
          </template>
        </div>
      </div>
      <ul class="ml-7 hidden shrink list-none flex-row justify-end lg:flex">
        <li
            class=" mr-7 border-b-2 border-transparent text-right hover:border-primary-500"
          >
            <a class="" href="/" title="WiloSite">Home</a>
          </li>
        <li
            class=" mr-7 border-b-2 border-transparent text-right hover:border-primary-500"
          >
            <a class="" href="" title="">Blog</a>
          </li>
        <li
            class=" mr-7 border-b-2 border-transparent text-right hover:border-primary-500"
          >
            <a class="" href="/categories/" title="Categories">Categories</a>
          </li>
        <li
            class=" mr-7 border-b-2 border-transparent text-right hover:border-primary-500"
          >
            <a class="" href="/tags/" title="Tags">Tags</a>
          </li>
        
      </ul>
      <button id="switchTheme" class="flex h-8 w-8 items-center justify-center focus:outline-none">
        <span class="sr-only">Switch theme</span>
        <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
            clip-rule="evenodd"
          ></path>
        </svg>
        
        <span class="light"></span><span class="dark"></span>
      </button>
      <script>
        document.getElementById("switchTheme").addEventListener("click", function () {
          if (
            localStorage.theme === "dark" ||
            ((!("theme" in localStorage) || localStorage.theme === "auto") &&
              window.matchMedia("(prefers-color-scheme: dark)").matches)
          ) {
            document.documentElement.classList.remove("dark");
            localStorage.theme = "light";
          } else if (
            localStorage.theme === "light" ||
            ((!("theme" in localStorage) || localStorage.theme === "auto") &&
              window.matchMedia("(prefers-color-scheme: light)").matches)
          ) {
            document.documentElement.classList.add("dark");
            localStorage.theme = "dark";
          }
        });
      </script>
    </nav>
  </header>
</div>

    <main class="container mx-auto my-6 flex max-w-7xl flex-row px-6 lg:px-8 xl:px-12">
      
  <article class="mx-auto min-w-0 max-w-prose flex-grow text-lg lg:text-xl">
    <header class="text-base">
      <h1
        class="my-3 text-3xl font-semibold text-neutral-800 dark:text-neutral-200"
        x-intersect:enter="up = false"
        x-intersect:leave="up = true"
      >Go Generic
      </h1>
      <div class="mb-6 text-base text-neutral-500 dark:text-neutral-400">
        





  
  



  

  
  
    
  

  
    
  

  


  <div class="flex flex-row items-center">
    
    
      <time datetime="2024-02-20 23:56:37 &#43;0800 CST">20 February 2024</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">1 min</span>
    

    
    
  </div>


      </div>
    </header>
    <section class="prose max-w-none text-base  dark:prose-invert">
      
<h2 id="go-泛型支持">GO 泛型支持 <a class="heading-anchor" href="#go-%e6%b3%9b%e5%9e%8b%e6%94%af%e6%8c%81" aria-hidden="true">#</a></h2>
<p>在Go中，泛型是和接口类型共同构成了多态系统，但是泛型实际上也是一种妥协。</p>

<h3 id="泛型函数">泛型函数 <a class="heading-anchor" href="#%e6%b3%9b%e5%9e%8b%e5%87%bd%e6%95%b0" aria-hidden="true">#</a></h3>
<p>指的是可以对一类数据类型进行某种逻辑操作的函数。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// 该函数标识可以对一类数据类型执行加法操作，其中T是类型参数
</span></span></span><span class="line"><span class="cl"><span class="c1">// 1. T为类型参数, 在使用泛型时需要为这个参数赋值
</span></span></span><span class="line"><span class="cl"><span class="c1">// 2. int | float32为函数中对参数类型约束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nx">AddAny</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span> <span class="p">|</span> <span class="kt">int64</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">T</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestAnyAdd</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">t</span><span class="p">.</span><span class="nf">Logf</span><span class="p">(</span><span class="s">&#34;V: %v&#34;</span><span class="p">,</span> <span class="nx">AddAny</span><span class="p">[</span><span class="kt">int64</span><span class="p">](</span><span class="mi">12</span><span class="p">,</span> <span class="mi">43</span><span class="p">))</span> <span class="c1">// 显式指定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">t</span><span class="p">.</span><span class="nf">Logf</span><span class="p">(</span><span class="s">&#34;V: %v&#34;</span><span class="p">,</span> <span class="nf">AddAny</span><span class="p">(</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">43.0</span><span class="p">))</span>    <span class="c1">// 隐式自动推导
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// AddAny(float64(12), float32(12)) // 要求必须要类型一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>类型参数 &amp; 类型实参。</p>
<p>其中比较重要的一点是，需要在调用时传入具体数据类型作为类型实参，也可以自行推导。</p>

<h3 id="类型约束">类型约束 <a class="heading-anchor" href="#%e7%b1%bb%e5%9e%8b%e7%ba%a6%e6%9d%9f" aria-hidden="true">#</a></h3>
<p>即约束这个函数可以使用什么样的数据类型。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Ordered</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">int64</span> <span class="p">|</span> <span class="err">~</span><span class="kt">float32</span> <span class="p">|</span> <span class="err">~</span><span class="kt">float64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>约束时可以使用~也可以不用,区别是什么?</p>

<h2 id="泛型类型">泛型类型 <a class="heading-anchor" href="#%e6%b3%9b%e5%9e%8b%e7%b1%bb%e5%9e%8b" aria-hidden="true">#</a></h2>
<p>即指在某个具体的结构体中可以使用泛型作为字段的数据类型。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">AnyMap</span><span class="p">[</span><span class="nx">T</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">P</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">K</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl">	<span class="nx">V</span> <span class="nx">P</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>
<h2 id="todo">TODO <a class="heading-anchor" href="#todo" aria-hidden="true">#</a></h2>

    </section>
    <footer class="pt-8">
      
  <div class="flex text-base text-neutral-500 dark:text-neutral-400">
    
    <div class="place-self-center">
      
      
      

    </div>
  </div>


      

      
  


    </footer>
  </article>
  

    </main>
    <footer class="bg-neutral-200 text-neutral-500 dark:bg-neutral-900 dark:text-neutral-500">
  <div class="container mx-auto flex max-w-7xl flex-row px-6 py-4 text-sm lg:px-8 xl:px-12">
    <div class="flex-1">
      <p>
        &copy;
          2024
          </p>
      
        <p class="text-sm">
          
          Powered by <a class="hover:underline hover:text-primary-500" href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:text-primary-500" href="https://canstand.github.io/compost" target="_blank" rel="noopener noreferrer">Compost</a>
        </p>
      
    </div>
    <div class="flex-1">
      
    </div>
  </div>
</footer>



    

  </body>
</html>
